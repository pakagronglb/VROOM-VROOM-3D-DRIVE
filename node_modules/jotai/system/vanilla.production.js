System.register([],function(E){"use strict";return{execute:function(){E("atom",N);let L=0;function N(r,l){const h=`atom${++L}`,v={toString:()=>h};return typeof r=="function"?v.read=r:(v.init=r,v.read=R,v.write=T),l&&(v.write=l),v}function R(r){return r(this)}function T(r,l,h){return l(this,typeof h=="function"?h(r(this)):h)}const M=(r,l)=>r.unstable_is?r.unstable_is(l):l===r,D=r=>"init"in r,O=r=>!!r.write,m=new WeakMap,U=(r,l)=>{m.set(r,l),r.catch(()=>{}).finally(()=>m.delete(r))},_=(r,l)=>{const h=m.get(r);h&&(m.delete(r),h(l))},C=(r,l)=>{r.status="fulfilled",r.value=l},q=(r,l)=>{r.status="rejected",r.reason=l},V=r=>typeof(r==null?void 0:r.then)=="function",S=(r,l)=>!!r&&"v"in r&&"v"in l&&Object.is(r.v,l.v),B=(r,l)=>!!r&&"e"in r&&"e"in l&&Object.is(r.e,l.e),w=r=>!!r&&"v"in r&&r.v instanceof Promise,$=(r,l)=>"v"in r&&"v"in l&&r.v.orig&&r.v.orig===l.v.orig,p=r=>{if("e"in r)throw r.e;return r.v},x=E("createStore",()=>{const r=new WeakMap,l=new WeakMap,h=new Map,v=t=>r.get(t),F=(t,e)=>{const o=v(t);if(r.set(t,e),h.has(t)||h.set(t,o),w(o)){const s="v"in e?e.v instanceof Promise?e.v:Promise.resolve(e.v):Promise.reject(e.e);o.v!==s&&_(o.v,s)}},G=(t,e,o,s)=>{const c=new Map(s?e.d:null);let u=!1;o.forEach((n,i)=>{!n&&M(t,i)&&(n=e),n&&(c.set(i,n),e.d.get(i)!==n&&(u=!0))}),(u||e.d.size!==c.size)&&(e.d=c)},A=(t,e,o,s)=>{const c=v(t),u={d:(c==null?void 0:c.d)||new Map,v:e};if(o&&G(t,u,o,s),S(c,u)&&c.d===u.d)return c;if(w(c)&&w(u)&&$(c,u)){if(c.d===u.d)return c;u.v=c.v}return F(t,u),u},H=(t,e,o,s)=>{if(V(e)){let c;const u=()=>{const i=v(t);if(!w(i)||i.v!==n)return;const d=A(t,n,o);l.has(t)&&i.d!==d.d&&J(t,d,i.d)},n=new Promise((i,d)=>{let a=!1;e.then(f=>{a||(a=!0,C(n,f),i(f),u())},f=>{a||(a=!0,q(n,f),d(f),u())}),c=f=>{a||(a=!0,f.then(g=>C(n,g),g=>q(n,g)),i(f))}});return n.orig=e,n.status="pending",U(n,i=>{i&&c(i),s==null||s()}),A(t,n,o,!0)}return A(t,e,o)},K=(t,e,o)=>{const s=v(t),c={d:(s==null?void 0:s.d)||new Map,e};return o&&G(t,c,o),B(s,c)&&s.d===c.d?s:(F(t,c),c)},y=(t,e)=>{const o=v(t);if(!e&&o&&(l.has(t)||Array.from(o.d).every(([a,f])=>{if(a===t)return!0;const g=y(a);return g===f||S(g,f)})))return o;const s=new Map;let c=!0;const u=a=>{if(M(t,a)){const g=v(a);if(g)return s.set(a,g),p(g);if(D(a))return s.set(a,void 0),a.init;throw new Error("no atom init")}const f=y(a);return s.set(a,f),p(f)};let n,i;const d={get signal(){return n||(n=new AbortController),n.signal},get setSelf(){return!i&&O(t)&&(i=(...a)=>{if(!c)return z(t,...a)}),i}};try{const a=t.read(u,d);return H(t,a,s,()=>n==null?void 0:n.abort())}catch(a){return K(t,a,s)}finally{c=!1}},Q=t=>p(y(t)),X=t=>{let e=l.get(t);return e||(e=P(t)),e},k=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),Y=t=>{const e=l.get(t);e&&k(t,e)&&j(t)},Z=t=>{const e=n=>{var i;const d=new Set((i=l.get(n))==null?void 0:i.t);return h.forEach((a,f)=>{var g;(g=v(f))!=null&&g.d.has(n)&&d.add(f)}),d},o=new Array,s=new Set,c=n=>{if(!s.has(n)){s.add(n);for(const i of e(n))n!==i&&c(i);o.push(n)}};c(t);const u=new Set([t]);for(let n=o.length-1;n>=0;--n){const i=o[n],d=v(i);if(!d)continue;let a=!1;for(const f of d.d.keys())if(f!==i&&u.has(f)){a=!0;break}if(a){const f=y(i,!0);S(d,f)||u.add(i)}}},I=(t,...e)=>{let o=!0;const s=n=>p(y(n)),c=(n,...i)=>{let d;if(M(t,n)){if(!D(n))throw new Error("atom not writable");const a=v(n),f=H(n,i[0]);S(a,f)||Z(n)}else d=I(n,...i);return o||W(),d},u=t.write(s,c,...e);return o=!1,u},z=(t,...e)=>{const o=I(t,...e);return W(),o},P=(t,e,o)=>{var s;const c=o||[];(s=v(t))==null||s.d.forEach((n,i)=>{const d=l.get(i);d?d.t.add(t):i!==t&&P(i,t,c)}),y(t);const u={t:new Set(e&&[e]),l:new Set};if(l.set(t,u),O(t)&&t.onMount){const{onMount:n}=t;c.push(()=>{const i=n((...d)=>z(t,...d));i&&(u.u=i)})}return o||c.forEach(n=>n()),u},j=t=>{var e;const o=(e=l.get(t))==null?void 0:e.u;o&&o(),l.delete(t);const s=v(t);s&&(w(s)&&_(s.v),s.d.forEach((c,u)=>{if(u!==t){const n=l.get(u);n&&(n.t.delete(t),k(u,n)&&j(u))}}))},J=(t,e,o)=>{const s=new Set(e.d.keys()),c=new Set;o==null||o.forEach((u,n)=>{if(s.has(n)){s.delete(n);return}c.add(n);const i=l.get(n);i&&i.t.delete(t)}),s.forEach(u=>{const n=l.get(u);n?n.t.add(t):l.has(t)&&P(u,t)}),c.forEach(u=>{const n=l.get(u);n&&k(u,n)&&j(u)})},W=()=>{for(;h.size;){const t=Array.from(h);h.clear(),t.forEach(([e,o])=>{const s=v(e);if(s){const c=l.get(e);c&&s.d!==(o==null?void 0:o.d)&&J(e,s,o==null?void 0:o.d),c&&!(!w(o)&&(S(o,s)||B(o,s)))&&c.l.forEach(u=>u())}})}};return{get:Q,set:z,sub:(t,e)=>{const o=X(t);W();const s=o.l;return s.add(e),()=>{s.delete(e),Y(t)}}}});let b;const tt=E("getDefaultStore",()=>(b||(b=x()),b))}}});
